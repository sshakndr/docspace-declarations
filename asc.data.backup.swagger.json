{
  "openapi": "3.0.1",
  "info": {
    "title": "ASC.Data.Backup",
    "version": "v2"
  },
  "paths": {
    "/api/2.0/backup/getbackupschedule": {
      "get": {
        "tags": [
          "Backup"
        ],
        "summary": "Get the backup schedule",
        "responses": {
          "200": {
            "description": "Backup schedule",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ASC.Data.Backup.BackupAjaxHandler_Schedule"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ASC.Data.Backup.BackupAjaxHandler_Schedule"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ASC.Data.Backup.BackupAjaxHandler_Schedule"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          }
        },
        "security": [
          {
            "asc_auth_key": [
              "read",
              "write"
            ]
          }
        ],
        "x-shortName": "Get the backup schedule",
        "description": "Returns the backup schedule of the current portal."
      }
    },
    "/api/2.0/backup/createbackupschedule": {
      "post": {
        "tags": [
          "Backup"
        ],
        "summary": "Create the backup schedule",
        "requestBody": {
          "description": "Backup schedule parameters",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ASC.Data.Backup.ApiModels.BackupScheduleDto"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/ASC.Data.Backup.ApiModels.BackupScheduleDto"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/ASC.Data.Backup.ApiModels.BackupScheduleDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Boolean value: true if the operation is successful",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "boolean"
                }
              },
              "application/json": {
                "schema": {
                  "type": "boolean"
                }
              },
              "text/json": {
                "schema": {
                  "type": "boolean"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          }
        },
        "security": [
          {
            "asc_auth_key": [
              "read",
              "write"
            ]
          }
        ],
        "x-shortName": "Create the backup schedule",
        "description": "Creates the backup schedule of the current portal with the parameters specified in the request."
      }
    },
    "/api/2.0/backup/deletebackupschedule": {
      "delete": {
        "tags": [
          "Backup"
        ],
        "summary": "Delete the backup schedule",
        "responses": {
          "200": {
            "description": "Boolean value: true if the operation is successful",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "boolean"
                }
              },
              "application/json": {
                "schema": {
                  "type": "boolean"
                }
              },
              "text/json": {
                "schema": {
                  "type": "boolean"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          }
        },
        "security": [
          {
            "asc_auth_key": [
              "read",
              "write"
            ]
          }
        ],
        "x-shortName": "Delete the backup schedule",
        "description": "Deletes the backup schedule of the current portal."
      }
    },
    "/api/2.0/backup/startbackup": {
      "post": {
        "tags": [
          "Backup"
        ],
        "summary": "Start the backup",
        "requestBody": {
          "description": "Backup parameters",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ASC.Data.Backup.ApiModels.BackupDto"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/ASC.Data.Backup.ApiModels.BackupDto"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/ASC.Data.Backup.ApiModels.BackupDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Backup progress: completed or not, progress percentage, error, tenant ID, backup progress item (Backup, Restore, Transfer), link",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ASC.Data.Backup.Contracts.BackupProgress"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ASC.Data.Backup.Contracts.BackupProgress"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ASC.Data.Backup.Contracts.BackupProgress"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          }
        },
        "security": [
          {
            "asc_auth_key": [
              "read",
              "write"
            ]
          }
        ],
        "x-shortName": "Start the backup",
        "description": "Starts the backup of the current portal with the parameters specified in the request."
      }
    },
    "/api/2.0/backup/getbackupprogress": {
      "get": {
        "tags": [
          "Backup"
        ],
        "summary": "Get the backup progress",
        "responses": {
          "200": {
            "description": "Backup progress: completed or not, progress percentage, error, tenant ID, backup progress item (Backup, Restore, Transfer), link",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ASC.Data.Backup.Contracts.BackupProgress"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ASC.Data.Backup.Contracts.BackupProgress"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ASC.Data.Backup.Contracts.BackupProgress"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          }
        },
        "security": [
          {
            "asc_auth_key": [
              "read",
              "write"
            ]
          }
        ],
        "x-shortName": "Get the backup progress",
        "description": "Returns the progress of the started backup."
      }
    },
    "/api/2.0/backup/getbackuphistory": {
      "get": {
        "tags": [
          "Backup"
        ],
        "summary": "Get the backup history",
        "responses": {
          "200": {
            "description": "List of backup history records",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ASC.Data.Backup.Contracts.BackupHistoryRecord"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ASC.Data.Backup.Contracts.BackupHistoryRecord"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ASC.Data.Backup.Contracts.BackupHistoryRecord"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          }
        },
        "security": [
          {
            "asc_auth_key": [
              "read",
              "write"
            ]
          }
        ],
        "x-shortName": "Get the backup history",
        "description": "Returns the history of the started backup."
      }
    },
    "/api/2.0/backup/deletebackup/{id}": {
      "delete": {
        "tags": [
          "Backup"
        ],
        "summary": "Delete the backup",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Backup ID",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "9924256A-739C-462b-AF15-E652A3B1B6EB"
          }
        ],
        "responses": {
          "200": {
            "description": "Boolean value: true if the operation is successful",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "boolean"
                }
              },
              "application/json": {
                "schema": {
                  "type": "boolean"
                }
              },
              "text/json": {
                "schema": {
                  "type": "boolean"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          }
        },
        "security": [
          {
            "asc_auth_key": [
              "read",
              "write"
            ]
          }
        ],
        "x-shortName": "Delete the backup",
        "description": "Deletes the backup with the ID specified in the request."
      }
    },
    "/api/2.0/backup/deletebackuphistory": {
      "delete": {
        "tags": [
          "Backup"
        ],
        "summary": "Delete the backup history",
        "responses": {
          "200": {
            "description": "Boolean value: true if the operation is successful",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "boolean"
                }
              },
              "application/json": {
                "schema": {
                  "type": "boolean"
                }
              },
              "text/json": {
                "schema": {
                  "type": "boolean"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          }
        },
        "security": [
          {
            "asc_auth_key": [
              "read",
              "write"
            ]
          }
        ],
        "x-shortName": "Delete the backup history",
        "description": "Deletes the backup history of the current portal."
      }
    },
    "/api/2.0/backup/startrestore": {
      "post": {
        "tags": [
          "Backup"
        ],
        "summary": "Start the restoring process",
        "requestBody": {
          "description": "Restoring parameters",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ASC.Data.Backup.ApiModels.BackupRestoreDto"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/ASC.Data.Backup.ApiModels.BackupRestoreDto"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/ASC.Data.Backup.ApiModels.BackupRestoreDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Backup progress: completed or not, progress percentage, error, tenant ID, backup progress item (Backup, Restore, Transfer), link",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ASC.Data.Backup.Contracts.BackupProgress"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ASC.Data.Backup.Contracts.BackupProgress"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ASC.Data.Backup.Contracts.BackupProgress"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          }
        },
        "security": [
          {
            "asc_auth_key": [
              "read",
              "write"
            ]
          }
        ],
        "x-shortName": "Start the restoring process",
        "description": "Starts the data restoring process of the current portal with the parameters specified in the request."
      }
    },
    "/api/2.0/backup/getrestoreprogress": {
      "get": {
        "tags": [
          "Backup"
        ],
        "summary": "Get the restoring progress",
        "responses": {
          "200": {
            "description": "Backup progress: completed or not, progress percentage, error, tenant ID, backup progress item (Backup, Restore, Transfer), link",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ASC.Data.Backup.Contracts.BackupProgress"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ASC.Data.Backup.Contracts.BackupProgress"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ASC.Data.Backup.Contracts.BackupProgress"
                }
              }
            }
          }
        },
        "x-shortName": "Get the restoring progress",
        "description": "Returns the progress of the started restoring process."
      }
    }
  },
  "components": {
    "schemas": {
      "ASC.Api.Collections.ItemKeyValuePair<System.Object, System.Object>": {
        "type": "object",
        "properties": {
          "key": {
            "nullable": true
          },
          "value": {
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "ASC.Data.Backup.ApiModels.BackupDto": {
        "type": "object",
        "properties": {
          "storageType": {
            "type": "string",
            "description": "Storage type",
            "nullable": true,
            "example": "some text"
          },
          "storageParams": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ASC.Api.Collections.ItemKeyValuePair<System.Object, System.Object>"
            },
            "description": "Storage parameters",
            "nullable": true
          },
          "dump": {
            "type": "boolean",
            "description": "Specifies if a dump will be created or not",
            "example": true
          }
        },
        "additionalProperties": false
      },
      "ASC.Data.Backup.ApiModels.BackupRestoreDto": {
        "type": "object",
        "properties": {
          "backupId": {
            "type": "string",
            "description": "Backup ID",
            "nullable": true,
            "example": "some text"
          },
          "storageType": {
            "description": "Storage type",
            "nullable": true,
            "example": "some text"
          },
          "storageParams": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ASC.Api.Collections.ItemKeyValuePair<System.Object, System.Object>"
            },
            "description": "Storage parameters",
            "nullable": true
          },
          "notify": {
            "type": "boolean",
            "description": "Notifies users about portal restoring process or not",
            "example": true
          }
        },
        "additionalProperties": false
      },
      "ASC.Data.Backup.ApiModels.BackupScheduleDto": {
        "type": "object",
        "properties": {
          "storageType": {
            "type": "string",
            "description": "Storage type",
            "nullable": true,
            "example": "some text"
          },
          "storageParams": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ASC.Api.Collections.ItemKeyValuePair<System.Object, System.Object>"
            },
            "description": "Storage parameters",
            "nullable": true
          },
          "backupsStored": {
            "type": "string",
            "description": "Maximum number of the stored backup copies",
            "nullable": true,
            "example": "some text"
          },
          "cronParams": {
            "$ref": "#/components/schemas/ASC.Data.Backup.ApiModels.Cron"
          },
          "dump": {
            "type": "boolean",
            "description": "Specifies if a dump will be created or not",
            "example": true
          }
        },
        "additionalProperties": false
      },
      "ASC.Data.Backup.ApiModels.Cron": {
        "type": "object",
        "properties": {
          "period": {
            "type": "string",
            "description": "Period",
            "nullable": true,
            "example": "0"
          },
          "hour": {
            "type": "string",
            "description": "Hour",
            "nullable": true,
            "example": "0"
          },
          "day": {
            "type": "string",
            "description": "Day",
            "nullable": true,
            "example": "0"
          }
        },
        "additionalProperties": false
      },
      "ASC.Data.Backup.BackupAjaxHandler_BackupPeriod": {
        "enum": [
          "EveryDay",
          "EveryWeek",
          "EveryMonth"
        ],
        "type": "integer",
        "description": "[0 - Every day, 1 - Every week, 2 - Every month]",
        "format": "int32"
      },
      "ASC.Data.Backup.BackupAjaxHandler_CronParams": {
        "type": "object",
        "properties": {
          "period": {
            "$ref": "#/components/schemas/ASC.Data.Backup.BackupAjaxHandler_BackupPeriod"
          },
          "hour": {
            "type": "integer",
            "description": "Hour",
            "format": "int32",
            "example": 1234
          },
          "day": {
            "type": "integer",
            "description": "Day",
            "format": "int32",
            "example": 1234
          }
        },
        "additionalProperties": false
      },
      "ASC.Data.Backup.BackupAjaxHandler_Schedule": {
        "type": "object",
        "properties": {
          "storageType": {
            "$ref": "#/components/schemas/ASC.Data.Backup.Contracts.BackupStorageType"
          },
          "storageParams": {
            "type": "object",
            "additionalProperties": {
              "type": "string",
              "nullable": true
            },
            "description": "Storage parameters",
            "nullable": true
          },
          "cronParams": {
            "$ref": "#/components/schemas/ASC.Data.Backup.BackupAjaxHandler_CronParams"
          },
          "backupsStored": {
            "type": "integer",
            "description": "Maximum number of the stored backup copies",
            "format": "int32",
            "nullable": true,
            "example": 1234
          },
          "lastBackupTime": {
            "type": "string",
            "description": "Last backup creation time",
            "format": "date-time",
            "example": "2008-04-10T06:30:00.0000000+04:00"
          },
          "dump": {
            "type": "boolean",
            "description": "Dump",
            "example": false
          }
        },
        "additionalProperties": false
      },
      "ASC.Data.Backup.Contracts.BackupHistoryRecord": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Backup ID",
            "format": "uuid",
            "example": "75a5f745-f697-4418-b38d-0fe0d277e258"
          },
          "fileName": {
            "type": "string",
            "description": "File name",
            "nullable": true,
            "example": "some text"
          },
          "storageType": {
            "$ref": "#/components/schemas/ASC.Data.Backup.Contracts.BackupStorageType"
          },
          "createdOn": {
            "type": "string",
            "description": "Creation date",
            "format": "date-time",
            "example": "2008-04-10T06:30:00.0000000+04:00"
          },
          "expiresOn": {
            "type": "string",
            "description": "Expiration date",
            "format": "date-time",
            "example": "2008-04-10T06:30:00.0000000+04:00"
          }
        },
        "additionalProperties": false
      },
      "ASC.Data.Backup.Contracts.BackupProgress": {
        "type": "object",
        "properties": {
          "isCompleted": {
            "type": "boolean",
            "description": "Completed or not",
            "example": true
          },
          "progress": {
            "type": "integer",
            "description": "Progress",
            "format": "int32",
            "example": 1234
          },
          "error": {
            "type": "string",
            "description": "Error",
            "nullable": true,
            "example": "some text"
          },
          "link": {
            "type": "string",
            "description": "Link",
            "format": "uri",
            "nullable": true,
            "example": "some text"
          },
          "tenantId": {
            "type": "integer",
            "description": "Tenant id",
            "format": "int32",
            "example": 1234
          },
          "backupProgressEnum": {
            "$ref": "#/components/schemas/ASC.Data.Backup.Contracts.BackupProgressEnum"
          },
          "taskId": {
            "type": "string",
            "description": "Task id",
            "nullable": true,
            "example": "some text"
          }
        },
        "additionalProperties": false
      },
      "ASC.Data.Backup.Contracts.BackupProgressEnum": {
        "enum": [
          "Backup",
          "Restore",
          "Transfer"
        ],
        "type": "integer",
        "description": "[0 - Backup, 1 - Restore, 2 - Transfer]",
        "format": "int32"
      },
      "ASC.Data.Backup.Contracts.BackupStorageType": {
        "enum": [
          "Documents",
          "ThridpartyDocuments",
          "CustomCloud",
          "Local",
          "DataStore",
          "ThirdPartyConsumer"
        ],
        "type": "integer",
        "description": "[0 - Documents, 1 - Thridparty documents, 2 - Custom cloud, 3 - Local, 4 - Data store, 5 - Thirdparty consumer]",
        "format": "int32"
      }
    },
    "securitySchemes": {
      "asc_auth_key": {
        "type": "apiKey",
        "in": "cookie"
      }
    }
  }
}